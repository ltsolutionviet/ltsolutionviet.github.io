<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link href="../style.css" rel="stylesheet" />
</head>
<body>
<div class="reading-test-section panel-container">
<!--    Content -->

    <div class="exam-content panel style-6 panel-right panel-bottom">
   <!--   Question -->

        <div class="exam-section panel text-center">
            <h4>---End of the Test---</h4>
            <p>Please Submit to view your score, solution and explanations.</p>

            <div id="test" style="display: none">
                <div class="stats-right">
                    <h3 class="text-center" style="color: #aaaaaa">
                        Solution for: 
                    </h3>
                    <div class="upper-stats">
                        <h1>
                            Your Score: <b><b id="scoreValue"></b> / 13</b>
                        </h1>
                    </div>
                    <h3>Answer Table</h3>
                   <!-- Table -->
                </div>
            </div>

            <p id="buttonShow">
                <a
                        onclick="submit()"
                        class="btn btn-success"
                        data-toggle="modal"
                        data-target="#confirmSubmit"
                ><i class="fa fa-paper-plane fa-lg" aria-hidden="true"></i>&nbsp;Submit</a
                ></p>
            <p id="buttonHidden" style="display: none">
                <a onclick="hiddenForm()" class="btn btn-success"
                ><i class="fa fa-paper-plane fa-lg" aria-hidden="true"></i>&nbsp;Hidden</a
                ></p>
        </div>
        <script>
      function submit() {
        var x = document.getElementById('test');
        var y = document.getElementById('buttonHidden');
        var z = document.getElementById('buttonShow');
        var count = 0;
        var resultBoard = [
        "candlewax",
        "synthetic",
        "chemistry",
        "Novalak",
        "fillers",
        "hexa",
        "raw",
        "pressure",
       	['B', 'C'],
      	['B', 'C'],
        "TRUE",
        "FALSE",
        "FALSE",

        ];
        var numTextbox = 8;
        for (let i = 1; i <= 13; i++) {
          let id = 'q' + i;
          if (i <= numTextbox) {
          	//Input
              let content = document.getElementById("q" + i).value;
              if (resultBoard[i - 1].trim().toUpperCase() === content.trim().toUpperCase()) {
                count += 1;
              }
           
          } else if (i > numTextbox  && i < 11) {
            //Checkbox
              let content = this.getValueCheckBox(id);
	          let checkedMar = false;
	          for (valChe of resultBoard[i - 1]) {
	            for (contents of content) {
	              if (valChe.trim().toUpperCase() == contents.trim().toUpperCase()) count += 1;
	            }
	          } 
          } else  {
               //Select box
	            let selectedVal = document.getElementById(id);
	            let checkedValueSe = selectedVal.options[selectedVal.selectedIndex].value;
	            if (resultBoard[i - 1] == checkedValueSe) {
	                  count += 1;
	            }
          }
        }
        if (x.style.display === 'none') {
          x.style.display = 'block';
          document.getElementById('scoreValue').innerHTML = count;
          y.style.display = 'block';
          z.style.display = 'none';
        }
      }
      function hiddenForm() {
        var x = document.getElementById('test');
        var y = document.getElementById('buttonHidden');
        var z = document.getElementById('buttonShow');
        x.style.display = 'none';
        y.style.display = 'none';
        z.style.display = 'block';
      }
      function gdd(n) {}
	  function grd(n) {}
	  function getValueCheckBox(value) {
	    var cCoxes = document.getElementsByName(value);
	    var len = cCoxes.length;
	    var arrayReturn = []
	    for (var i = 0; i < len; i++) {
	      if (cCoxes[i].checked) {
	        arrayReturn.push(cCoxes[i].value);
	      }
	    }
	    return arrayReturn;
	  }
	  function gcb(n, va2, va3) {
	    let inputTags = document.getElementsByName(n.name);
	    let total = 0;
	    // limit checkbox
	    let limit = 2;
	    for (let i = 0; i < inputTags.length; i++) {
	      if (inputTags[i].checked) {
	        total = total + 1;
	      }
	      if (total > limit) {
	        inputTags[i].checked = false;
	        return;
	      }
	    }
	  }
	  function gtb() {}
    </script>
    </div>
</div>
</body>
</html>